{"version":3,"file":"SignIn.stories.3771b3cb.js","sources":["../../src/pages/SignIn.tsx"],"sourcesContent":["import { Text } from \"../components/Text\";\nimport { TextInput } from \"../components/TextInput\";\nimport { EnvelopeSimple, Lock } from \"phosphor-react\";\nimport { CheckBox } from \"../components/Checkbox\";\nimport { Button } from \"../components/Button\";\nimport { useState } from \"react\";\nimport { errorAlert, successAlert } from \"../components/Alert\";\nimport { FormsFooter } from \"../components/FormsFooter\";\nimport { Link } from \"../components/Link\";\nimport { SubmitHandler, useForm } from \"react-hook-form\";\nimport axios from \"axios\";\n\nimport validators from \"../helpers/validators\";\n\ninterface ISignInForm {\n  email: string;\n  password: string;\n  remember: boolean;\n}\n\nfunction SignIn() {\n  const [isUserSignedIn, setIsUserSignedIn] = useState<boolean>(false);\n\n  const {\n    watch,\n    handleSubmit,\n    register,\n    setValue,\n    formState: { errors },\n  } = useForm<ISignInForm>({\n    shouldFocusError: true,\n    defaultValues: {\n      email: \"\",\n      password: \"\",\n      remember: false,\n    },\n  });\n\n  const onSubmit: SubmitHandler<ISignInForm> = async ({ ...fields }) => {\n    try {\n      const { data } = await axios.post(\"/sessions\", {\n        ...fields,\n      });\n\n      if (data.success === true) {\n        setIsUserSignedIn(true);\n        successAlert(data.message);\n      }\n    } catch (error: any) {\n      errorAlert(\n        error.response?.data?.message ||\n          \"Erro durante a autenticação, tente novamente!\"\n      );\n    }\n  };\n\n  return (\n    <>\n      <Text size=\"lg\" className=\"text-gray-400 mt-1\">\n        Faça login e comece a usar!\n      </Text>\n\n      <form\n        onSubmit={handleSubmit(onSubmit)}\n        className=\"flex flex-col items-stretch w-full max-w-sm mt-10 gap-4\"\n      >\n        <label htmlFor=\"email\" className=\"flex flex-col gap-3\">\n          <Text className=\"font-semibold\" size=\"md\">\n            Endereço de e-mail\n          </Text>\n          <TextInput.Root>\n            <TextInput.Icon>\n              <EnvelopeSimple />\n            </TextInput.Icon>\n            <TextInput.Input\n              id=\"email\"\n              placeholder=\"johndoe@example.com\"\n              autoComplete=\"off\"\n              register={() =>\n                register(\"email\", {\n                  required: true,\n                  validate: {\n                    isValidMail: (value) =>\n                      validators.validateEmail(value) ||\n                      \"Insira um e-mail válido\",\n                  },\n                })\n              }\n            />\n          </TextInput.Root>\n        </label>\n\n        <label htmlFor=\"password\" className=\"flex flex-col gap-3\">\n          <Text className=\"font-semibold\" size=\"md\">\n            Sua senha\n          </Text>\n          <TextInput.Root>\n            <TextInput.Icon>\n              <Lock />\n            </TextInput.Icon>\n            <TextInput.Input\n              type=\"password\"\n              id=\"password\"\n              placeholder=\"**********\"\n              register={() => register(\"password\", { required: true })}\n            />\n          </TextInput.Root>\n        </label>\n\n        <label htmlFor=\"remember\" className=\"mt-4\">\n          <CheckBox.Root>\n            <CheckBox.Input\n              id=\"remember\"\n              register={() => register(\"remember\")}\n              onCheckedChange={(checked) =>\n                setValue(\"remember\", Boolean(checked))\n              }\n            />\n            <CheckBox.Text>Lembrar de mim por 30 dias</CheckBox.Text>\n          </CheckBox.Root>\n        </label>\n\n        <Button className=\"mt-8\" type=\"submit\">\n          Entrar na plataforma\n        </Button>\n      </form>\n      <FormsFooter>\n        <Link\n          routerContext\n          to=\"/\"\n          className=\"blur-[0.7px] pointer-events-none cursor\"\n        >\n          Esqueceu sua senha?\n        </Link>\n        <Link routerContext to=\"/register\">\n          Não possui conta? Crie uma agora!\n        </Link>\n      </FormsFooter>\n    </>\n  );\n}\n\nexport { SignIn };\n"],"names":["SignIn","isUserSignedIn","setIsUserSignedIn","useState","watch","handleSubmit","register","setValue","formState","errors","useForm","shouldFocusError","defaultValues","email","password","remember","_Fragment","_jsx","Text","_jsxs","__name","fields","data","axios","post","success","successAlert","message","error","errorAlert","response","TextInput","EnvelopeSimple","required","validate","isValidMail","value","validators","validateEmail","Lock","CheckBox","Boolean","checked","Button","FormsFooter","Link"],"mappings":"o8BAoBA,SAASA,GAAS,CAChB,KAAM,CAACC,EAAgBC,CAAiB,EAAIC,mBAAkB,EAAK,EAE7D,CACJC,MAAAA,EACAC,aAAAA,EACAC,SAAAA,EACAC,SAAAA,EACAC,UAAW,CAAEC,OAAAA,CAAO,GAClBC,EAAqB,CACvBC,iBAAkB,GAClBC,cAAe,CACbC,MAAO,GACPC,SAAU,GACVC,SAAU,EACZ,CAAA,CACD,EAoBD,SACEC,EAAA,CAAA,SAAA,CACEC,EAACC,EAAI,CAAC,KAAK,KAAK,UAAU,qBAAoB,SAAA,gCAAA,CAAA,EAI9CC,EAAA,OAAA,CACE,SAAUd,EAzB6Be,EAAA,MAAO,IAAKC,CAAAA,IAAa,SAChE,GAAA,CACI,KAAA,CAAEC,KAAAA,CAAAA,EAAS,MAAMC,EAAMC,KAAK,YAAa,CAC7C,GAAGH,CAAAA,CACJ,EAEGC,EAAKG,UAAY,KACnBvB,EAAkB,EAAI,EACtBwB,EAAaJ,EAAKK,OAAO,SAEpBC,GACPC,IACED,GAAAA,EAAAA,EAAME,WAANF,YAAAA,EAAgBN,OAAhBM,YAAAA,EAAsBD,UACpB,qDAA+C,CAErD,CAAA,EAf2C,WAyBR,EAC/B,UAAU,0DAAyD,SAEnE,CAAAR,EAAA,QAAA,CAAO,QAAQ,QAAQ,UAAU,sBAAqB,SAAA,CACpDF,EAACC,EAAI,CAAC,UAAU,gBAAgB,KAAK,KAAI,SAAA,uBAAA,CAAA,EAGxCC,EAAAY,EAAU,KAAI,CAAA,SACb,CAACd,EAAAc,EAAU,KAAI,CAAA,SACbd,EAACe,EAAc,EAAA,CAAA,CAAG,EAEnBf,EAAAc,EAAU,MAAK,CACd,GAAG,QACH,YAAY,sBACZ,aAAa,MACb,SAAU,IACRzB,EAAS,QAAS,CAChB2B,SAAU,GACVC,SAAU,CACRC,YAAcC,GACZC,EAAWC,cAAcF,CAAK,GAC9B,4BACJ,CAAA,CACD,CAAA,CAEH,CAAA,CAAA,CACa,CAAA,CAAA,CAAA,EAGnBjB,EAAA,QAAA,CAAO,QAAQ,WAAW,UAAU,sBAAqB,SAAA,CACvDF,EAACC,EAAI,CAAC,UAAU,gBAAgB,KAAK,KAAI,SAAA,WAAA,CAAA,EAGxCC,EAAAY,EAAU,KAAI,CAAA,SACb,CAACd,EAAAc,EAAU,KAAI,CAAA,SACbd,EAACsB,EAAI,EAAA,CAAA,CAAG,EAETtB,EAAAc,EAAU,MAAK,CACd,KAAK,WACL,GAAG,WACH,YAAY,aACZ,SAAU,IAAMzB,EAAS,WAAY,CAAE2B,SAAU,EAAA,CAAM,CAAA,CACvD,CAAA,CAAA,CACa,CAAA,CAAA,CAAA,EAGnBhB,EAAA,QAAA,CAAO,QAAQ,WAAW,UAAU,OAAM,SACvCE,EAAAqB,EAAS,KAAI,CAAA,SACZ,CAACvB,EAAAuB,EAAS,MAAK,CACb,GAAG,WACH,SAAU,IAAMlC,EAAS,UAAU,EACnC,gBACEC,GAAAA,EAAS,WAAYkC,QAAQC,CAAO,CAAC,CAAA,CACtC,EAEFzB,EAAAuB,EAAS,KAAI,CAAA,SAAA,4BAAA,CAA2C,CAAA,CAAA,CAAA,CAAA,CAErD,EAERvB,EAAC0B,EAAM,CAAC,UAAU,OAAO,KAAK,SAAQ,SAAA,sBAAA,CAE7B,CAAA,CAAA,CACJ,EACPxB,EAACyB,EAAW,CAAA,SAAA,CACV3B,EAAC4B,EAAI,CACH,cAAa,GACb,GAAG,IACH,UAAU,0CAAyC,SAAA,qBAAA,CAG9C,EACP5B,EAAC4B,EAAI,CAAC,cAAa,GAAC,GAAG,YAAW,SAAA,sCAAA,CAE3B,CAAA,CAAA,CACK,CAAA,CAAA,CACb,CAEP,CAxHS7C,EAAAA,EAAAA"}